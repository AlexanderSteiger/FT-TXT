# This file is a template, and might need editing before it works on your project.
# see https://docs.gitlab.com/ce/ci/yaml/README.html for all available options

# you can delete this line if you're not using Docker
image: debian:stable

before_script:
  - cd /builds/fischertechnik/FT-TXT
  - apt-get update -qq
  - apt-get -y install joe git gitk cvs wget cpio
  - ./Linux-Pakete-Required.sh

#after_script:
#  - echo "After script section"
#  - echo "For example you might do some cleanup here"
   
build1:
  stage: build
  script:
    - ./Make-TXT-Bootloader.sh > Make-TXT-Bootloader.sh.log
    - ./Make-TXT-Buildroot-Clean.sh > Make-TXT-Buildroot-Clean.sh.log
    #- ./Make-TXT-UpdateScripts.sh > Make-TXT-UpdateScripts.sh.log : ./Make-TXT-UpdateScripts.sh: line 20: /builds/fischertechnik/update/update.sh: No such file or directory
    - ./Make-TXT-Image.sh
    - cd ../buildroot
    - make graph-depends
    - make graph-build
    - make graph-size
  artifacts:
    paths:
      - /builds/fischertechnik/$IMAGEFILE.zip
      - /builds/fischertechnik/update
      - /builds/fischertechnik/buildroot/output/graphs

#test1:
#  stage: test
#  script: 
#    - echo "Do a test here"
#    - echo "For example run a test suite"
   
#test2:
#  stage: test
#  script: 
#    - echo "Do another parallel test here"
#    - echo "For example run a lint test"
   
#deploy1:
#  stage: deploy
#  script:
#    - echo deploy
